<% layout('layouts/boilerplate') %>

<div class="container mt-5">
  <h1 class="text-center text-white mb-4">Edit Product</h1>
  <form action="/product/<%= foundProduct._id %>?_method=PATCH" method="POST" id="editProductForm">
    <div class="mb-3">
      <label for="name" class="form-label text-orange">Name</label>
      <input type="text" name="name" id="name" class="form-control" value="<%= foundProduct.name %>" required>
    </div>

    <div class="mb-3">
      <label for="img" class="form-label text-orange">Image URL</label>
      <input type="text" name="img" id="img" class="form-control" value="<%= foundProduct.img %>" required>
    </div>

    <div class="mb-3">
      <label for="price" class="form-label text-orange">Price</label>
      <input type="number" name="price" id="price" class="form-control" value="<%= foundProduct.price %>" min="1" required>
    </div>

    <div class="mb-3">
      <label for="desc" class="form-label text-orange">Description</label>
      <textarea name="desc" id="desc" class="form-control" rows="4" required><%= foundProduct.desc %></textarea>
    </div>

    <button type="submit" class="btn btn-primary">Update Product</button>
    <a href="/products" class="btn btn-outline-primary">Cancel</a>
  </form>
</div>


<script>
  document.getElementById("editProductForm").addEventListener("submit", function(e) {
    const name = document.getElementById("name").value.trim();
    const img = document.getElementById("img").value.trim();
    const price = document.getElementById("price").value;
    const desc = document.getElementById("desc").value.trim();

    if (!name || !img || !price || !desc) {
      e.preventDefault();
      alert("All fields are required!");
      return;
    }

    if (price <= 0) {
      e.preventDefault();
      alert("Price must be greater than 0!");
      return;
    }
  });
</script>
